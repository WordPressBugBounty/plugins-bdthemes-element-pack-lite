(()=>{"use strict";const t=async(t,e=!1)=>{const n=window.ElementPackConfig.contact_form;bdtUIkit.notification({message:`<div bdt-spinner></div> ${n.sending_msg}`,timeout:!1,status:"primary"});try{const n=await fetch(t.getAttribute("action"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(new FormData(t)).toString()}),o=await n.text(),a=(new DOMParser).parseFromString(o,"text/html").body.firstElementChild,r=a?.dataset.redirect,i=a?.dataset.external,c=a?.dataset.resetstatus;bdtUIkit.notification.closeAll();const s=bdtUIkit.notification({message:`<div class="bdt-contact-form-success-message-${e}">${o}</div>`});r&&"no"!==r&&bdtUIkit.util.on(document,"close",(t=>{t.detail[0]===s&&window.open(r,i)})),localStorage.setItem("bdtCouponCode",t.id),c&&"no"!==c&&t.reset()}catch(t){console.error("Contact form submission error:",t)}};window.elementPackGICCB=()=>{const e=window.ElementPackConfig.contact_form;return new Promise(((n,o)=>{if("undefined"==typeof grecaptcha)return bdtUIkit.notification({message:`<div bdt-spinner></div> ${e.captcha_nd}`,timeout:!1,status:"warning"}),o();const a=grecaptcha.getResponse();if(!a)return bdtUIkit.notification({message:`<div bdt-spinner></div> ${e.captcha_nr}`,timeout:!1,status:"warning"}),o();const r=Array.from(document.querySelectorAll("textarea.g-recaptcha-response")).find((t=>t.value===a)),i=r?.closest("form.bdt-contact-form-form"),c=i?.getAttribute("action");c&&""!==c&&t(i),grecaptcha.reset()}))};const e=e=>{const n=e instanceof jQuery?e[0]:e,o=n.dataset.id;n.querySelectorAll('.bdt-contact-form input[type="tel"]').forEach((t=>{t.addEventListener("input",(()=>{t.value=t.value.replace(/[^0-9+]/g,"")}))}));const a=n.querySelector(".bdt-contact-form .without-recaptcha");a&&a.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation(),t(a,o)}))};window.addEventListener("elementor/frontend/init",(()=>{window.elementorFrontend?.hooks&&elementorFrontend.hooks.addAction("frontend/element_ready/bdt-contact-form.default",e)}))})();