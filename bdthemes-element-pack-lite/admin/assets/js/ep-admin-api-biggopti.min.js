jQuery(document).ready((function(i){function e(){jQuery(".bdt-biggopti-countdown").each((function(){var i=jQuery(this),e=i.find(".countdown-timer"),t=i.data("end-date"),a=i.data("timezone");function n(){var n=new Date(t+" "+a).getTime()-(new Date).getTime();if(n<0)i.hide();else{var d=Math.floor(n/864e5),s=Math.floor(n%864e5/36e5),r=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3),l="";(d=d<10?"0"+d:d)>0&&(l+='<div class="countdown-item"><span class="number">'+d+'</span><span class="label">days</span></div><span class="separator"></span>'),l+='<div class="countdown-item"><span class="number">'+(s=s<10?"0"+s:s)+'</span><span class="label">hrs</span></div><span class="separator"></span>',l+='<div class="countdown-item"><span class="number">'+(r=r<10?"0"+r:r)+'</span><span class="label">min</span></div><span class="separator"></span>',l+='<div class="countdown-item"><span class="number">'+(o=o<10?"0"+o:o)+'</span><span class="label">sec</span></div>',e.html(l)}}t&&e.length&&(n(),setInterval(n,1e3))}))}i(document).on("click",".element-pack-biggopti.is-dismissible .bdt-admin-api-biggopti-dismiss",(function(e){e.preventDefault();var t=i(this).closest(".element-pack-biggopti"),a=t.data("display-id")||t.attr("data-display-id")||"";if(!a&&t.attr("id")){var n=t.attr("id");0===n.indexOf("bdt-admin-biggopti-api-biggopti-")&&(a=n.replace("bdt-admin-biggopti-api-biggopti-",""))}var d=t.data("dismissible-time")||t.attr("data-dismissible-time")||t.attr("dismissible-time")||604800,s=t.data("dismissible-meta")||t.attr("data-dismissible-meta")||t.attr("dismissible-meta")||"transient",r=window.ElementPackBiggoptiConfig||window.ElementPackAdminApiBiggoptiConfig||{},o=r.ajaxurl||("undefined"!=typeof ajaxurl?ajaxurl:"");o&&a&&r.nonce&&i.ajax({url:o,type:"POST",data:{action:"bdt_admin_api_biggopti_dismiss",display_id:a,id:t.attr("id"),meta:s,time:d,_wpnonce:r.nonce}}).done((function(){i(".element-pack-biggopti").filter((function(){return(i(this).data("display-id")||i(this).attr("data-display-id")||"")===a})).fadeTo(50,0,(function(){i(this).slideUp(50,(function(){i(this).remove()}))}))})).fail((function(){i(".element-pack-biggopti").filter((function(){return(i(this).data("display-id")||i(this).attr("data-display-id")||"")===a})).fadeTo(50,0,(function(){i(this).slideUp(50,(function(){i(this).remove()}))}))}))})),e(),jQuery(document).on("DOMNodeInserted",".bdt-biggopti-countdown",(function(){e()}));var t=window.ElementPackBiggoptiConfig||window.ElementPackAdminApiBiggoptiConfig||{},a=t.assetsUrl||"",n=!1;function d(i){if(!i||"element-pack"!==i.product||"adminDashboard"!==i.type)return!1;var e=i.client_targets||[],a=t&&t.isPro||!1;if(e.includes("pro_targeted")&&a)return n=!0,!1;var d=e.includes("free"),s=e.includes("pro")&&a;if(!d&&!s)return!1;if(!i.is_enabled)return!1;if(!i.end_date)return!1;var r=i.timezone||"UTC",o=(i.end_date+"").replace(" ","T")+("UTC"===r?"Z":""),l=new Date(o);return!isNaN(l.getTime())&&Date.now()<=l.getTime()}function s(i){if(!function(i){var e=i.visibility_sectors;if(!e||!Array.isArray(e)||0===e.length)return!0;for(var t=r(),a=0;a<t.length;a++)if(-1!==e.indexOf(t[a]))return!0;return!1}(i))return"";var e=function(i){return(i||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t=(i.background_color||"")+(i.image?" background-image:url("+e(i.image)+")":""),n="bdt-biggopti-wrapper"+(i.image?" has-background-image":""),d=e(i.title||""),s=e(i.content||""),o=i.logo||"",l=i.link||"",p=i.button_text||"Read More",c=i.show_countdown&&i.end_date,g=i.end_date||"",u=i.timezone||"UTC",m=i.display_id||i.id||"default",f="bdt-admin-biggopti-api-biggopti-"+m,h=c?'<div class="bdt-biggopti-countdown" data-end-date="'+e(g)+'" data-timezone="'+e(u)+'"><div class="countdown-timer">Loading...</div></div>':"",b=l?'<div class="bdt-biggopti-btn"><a href="'+e(l)+'" target="_blank"><div class="nm-biggopti-btn">'+e(p)+' <span class="dashicons dashicons-arrow-right-alt"></span></div></a></div>':"",v=o?'<div class="bdt-biggopti-logo-wrapper"><img width="100" src="'+e(o)+'" alt="Logo"></div>':"",w='<div class="'+n+'"'+(t?' style="'+e(t)+'"':"")+'><div class="bdt-api-biggopti-content"><div class="bdt-plugin-logo-wrapper"><img height="auto" width="40" src="'+a+'images/logo.svg" alt="Element Pack Logo"></div><div class="bdt-biggopti-content"><div class="bdt-biggopti-content-inner">'+v+'<div class="bdt-biggopti-title-description">'+(d?'<h2 class="bdt-biggopti-title">'+d+"</h2>":"")+(s?'<div class="bdt-biggopti-html-content">'+s+"</div>":"")+'</div></div><div class="bdt-biggopti-content-right">'+h+b+"</div></div></div></div>",_=g?Math.max(new Date(g.replace(" ","T")+("UTC"===u?"Z":"")).getTime()-Date.now(),0):604800,y='id="'+f+'"';return'<div class="element-pack-biggopti biggopti biggopti-info is-dismissible" '+(y+=' data-display-id="'+e(m)+'" data-dismissible-meta="transient" data-dismissible-time="'+_+'"')+">"+w+'<button type="button" class="bdt-admin-api-biggopti-dismiss dashicons dashicons-dismiss"><span class="screen-reader-text">Dismiss this biggopti.</span></button></div>'}function r(){var i=t&&t.currentSector||"";if(i)return[i];var e=(window.location.pathname||"").toLowerCase(),a=((window.location.search||"").match(/[?&]page=([^&]+)/i)||[])[1]||"",n="";try{n=a?decodeURIComponent(a.replace(/\+/g," "))||a:""}catch(i){n=a||""}var d=[],s=e.split("?")[0];return-1!==e.indexOf("wp-admin")&&(-1!==s.indexOf("index.php")||/\/wp-admin\/?$/.test(s))&&d.push("wp_dashboard"),!n||"element_pack_options"!==n&&-1===n.toLowerCase().indexOf("element_pack")||d.push("plugin_dashboard"),-1!==e.indexOf("themes.php")&&d.push("themes_page"),-1!==e.indexOf("options-")&&d.push("settings_page"),-1===e.indexOf("profile.php")&&-1===e.indexOf("user-edit.php")&&-1===e.indexOf("user-new.php")||d.push("user_page"),(-1!==e.indexOf("plugins.php")||-1!==e.indexOf("plugin-install.php")||-1!==e.indexOf("admin.php")&&n)&&d.push("plugin_pages"),-1!==e.indexOf("tools.php")&&d.push("tools_page"),d}var o=["wp_dashboard","plugin_dashboard","themes_page","settings_page","user_page","plugin_pages","tools_page"];function l(){for(var i=r(),e=0;e<i.length;e++)if(-1!==o.indexOf(i[e]))return!0;return 0===i.length}var p={sub_title:"Go Pro",link:"https://bdthemes.com/deals/?utm_source=WordPress_org&utm_medium=bfcm_cta&utm_campaign=element_pack"};function c(i){if(!(t&&t.isPro||!1)||i){var e=document.querySelector("#toplevel_page_element_pack_options .wp-submenu");if(e&&!e.querySelector(".bdt-promo-menu-item")){var a=i||p,n='<li class="bdt-promo-menu-item"><a href="'+(a.link||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;")+'" target="_blank" style="color: #08AEEC; font-weight: 600;" rel="noopener noreferrer">'+a.sub_title.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a></li>";e.insertAdjacentHTML("beforeend",n)}}}function g(a){window.bdtPromoData=a,function(){for(var i=window.location.href||"",e=["plugin-install.php","theme-install.php","action=upload-plugin","action=upload-theme"],t=0;t<e.length;t++)if(-1!==i.indexOf(e[t]))return!0;return!1}()||function(a){var n=a&&a["element-pack"];if(Array.isArray(n)){for(var r=t&&t.dismissedDisplayIds||[],o=[],l=[],p={},c=0;c<n.length;c++)if(d(n[c])){var g=n[c].display_id||n[c].id||"default-"+c;p[g]||(p[g]=!0,l.push(n[c]),-1===r.indexOf(g)&&o.push(n[c]))}if(0!==o.length||0!==l.length){var u=i("#wpbody-content .wrap").first();u.length||(u=i(".wrap").first()),u.length||(u=i("#wpbody-content"));for(var m="",f=0;f<o.length;f++){var h=o[f].display_id||o[f].id||"default-"+f;i('[id="bdt-admin-biggopti-api-biggopti-'+h+'"]').length||(m+=s(o[f]))}if(m||0!==l.length){if(m){var b=i(m);u.children("hr.wp-header-end").length?u.children("hr.wp-header-end").first().after(b):u.children("h1").length?u.children("h1").first().after(b):u.prepend(b)}e()}}}}(a),function(e){var t=e&&e["element-pack"];if(Array.isArray(t)&&t.length){var a=i("#bdt-dashboard-overview .inside");if(a.length||(a=i("#bdt-dashboard-overview")),a.length){for(var n,d,s,r,o,l="",p=0;p<t.length;p++){var c=t[p].display_id||t[p].id||"default-"+p;i("#bdt-admin-api-feed-"+c).length||(l+=(d=void 0,s=void 0,r=void 0,o=void 0,d=function(i){return(i||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},s=(n=t[p]).feed_image||"",r=n.link||"#",o=n.display_id||n.id||"default",s?`\n            <div id="${d("bdt-admin-api-feed-"+o)}" class="element-pack-feed">\n                <a href="${d(r)}" target="_blank" rel="noopener noreferrer">\n                    <img src="${d(s)}" alt="" style="max-width:100%; height:auto;">\n                </a>\n            </div>\n        `:""))}l&&a.prepend(i(l))}}}(a),n=!1;var r=function(i){var e=i&&i["element-pack"];if(!Array.isArray(e))return null;for(var t=0;t<e.length;t++)if(d(e[t])&&e[t].link)return{sub_title:e[t].sub_title,link:e[t].link};return null}(a);!l()||!r&&n||c(r)}function u(){fetch("https://api.sigmative.io/prod/store/api/biggopti/api-data-records").then((function(i){return i.json()})).then(g).catch((function(){!l()||t&&t.isPro||c(p)}))}i(window).on("load",(function(){setTimeout((function(){u(),setTimeout(u,500)}),400)}))}));